"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[927],{2927:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});class n{constructor(t=null,e={}){if(this.apiKey=t,this.options=e,"undefined"==typeof window)throw new Error("google-maps is supported only in browser environment")}load(){return void 0!==this.api?Promise.resolve(this.api):void 0!==this.loader?this.loader:(window[n.CALLBACK_NAME]=()=>{if(this.api=window.google,void 0===this.resolve)throw new Error("Should not happen");this.resolve(this.api)},window.gm_authFailure=()=>{if(void 0===this.reject)throw new Error("Should not happen");this.reject(new Error("google-maps: authentication error"))},this.loader=new Promise(((t,e)=>{this.resolve=t,this.reject=e;const a=document.createElement("script");a.src=this.createUrl(),a.async=!0,a.onerror=t=>e(t),document.head.appendChild(a)})))}createUrl(){const t=[`callback=${n.CALLBACK_NAME}`];this.apiKey&&t.push(`key=${this.apiKey}`);for(let e in this.options)if(this.options.hasOwnProperty(e)){let a=this.options[e];"version"===e&&(e="v"),"libraries"===e&&(a=a.join(",")),t.push(`${e}=${a}`)}return`https://maps.googleapis.com/maps/api/js?${t.join("&")}`}}n.CALLBACK_NAME="_dk_google_maps_loader_cb";var o=a(9669),s=a.n(o);const r={name:"country_list",beforeMount:function(){this.getCountryList()},mounted:function(){this.$emit("pagetitlechange",this.page_title)},data:function(){return{page_title:"Country",country:{},countries:[],submitted:!1,geocoder:"",server_errors:{}}},methods:{edit:function(t){var e=this;s().post(this.$popup_data.route("country_detail")+"/"+t,{}).then((function(t){e.country=t.data.data}))},update:function(){var t=this;s().post(this.$popup_data.route("country_update")+"/"+t.country.id,t.country).then((function(e){t.$popup_data.message(e.data.message),t.getCountryList()})).catch((function(e){t.server_errors=e.response.data.errors}))},getCountryList:function(){var t=this;s().get(this.$popup_data.route("country_get"),{}).then((function(e){t.countries=e.data.data}))},clear:function(){this.country={}},loadGoogleLib:function(){var t=new n("AIzaSyBL9QClgb-Bl73ui-iRjYJnR_xWgBxy9LM"),e=this;t.load().then((function(t){e.geocoder=new t.maps.Geocoder}))},searchGeocode:function(){this.country.lat="",this.country.lng=""},save:function(){console.log(this),this.submitted=!0;var t=this;this.$validator.validate().then((function(e){if(e){var a=t.$popup_data.route("country_add");s().post(a,t.country).then((function(e){t.server_errors={},t.country={},t.$popup_data.message(e.data.message),t.getCountryList()})).catch((function(e){t.server_errors=e.response.data.errors}))}}))},remove:function(t){var e=this;s().delete(this.$popup_data.route("country_delete")+"/"+t,{_method:"delete"}).then((function(t){e.$popup_data.message(t.data.message),e.getCountryList()}))}}};const i=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mb-3"},[t._m(0),t._v(" "),a("div",{staticClass:"col-auto"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.country.name,expression:"country.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.errors.has("name")},attrs:{name:"name",type:"text",placeholder:"Country name"},domProps:{value:t.country.name},on:{input:function(e){e.target.composing||t.$set(t.country,"name",e.target.value)}}}),t._v(" "),a("button",{staticClass:"input-group-btn btn btn-info",on:{click:t.searchGeocode}},[t._v("Search")])]),t._v(" "),t.$_.has(t.server_errors,"name")?a("div",{staticClass:"invalid-feedback d-block"},[t._v("\n                    "+t._s(t.server_errors.name.join(", "))+"\n                ")]):t._e()]),t._v(" "),a("div",{staticClass:"col-auto"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.country.lat,expression:"country.lat"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.errors.has("lat")},attrs:{name:"lat",placeholder:"Lat",type:"text"},domProps:{value:t.country.lat},on:{input:function(e){e.target.composing||t.$set(t.country,"lat",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.country.lng,expression:"country.lng"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.errors.has("lng")},attrs:{name:"lng",placeholder:"Lng",type:"text"},domProps:{value:t.country.lng},on:{input:function(e){e.target.composing||t.$set(t.country,"lng",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-auto"},[t.$_.has(t.country,"id")?a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.update}},[t._v("Update")]):a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.save}},[t._v("Add")]),t._v(" "),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.clear}},[t._v("Clear")])])]),t._v(" "),a("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),a("tbody",t._l(t.countries,(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(n+1))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.lat))]),t._v(" "),a("td",[t._v(t._s(e.lng))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm btn-info",on:{click:function(a){return t.edit(e.id)}}},[a("i",{staticClass:"fa fa-edit"})]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.remove(e.id)}}},[a("i",{staticClass:"fa fa-trash"})])])])})),0)])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-auto"},[a("label",{staticClass:"form-label"},[t._v("Country name:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Latitude")]),t._v(" "),a("th",[t._v("Logitude")]),t._v(" "),a("th",[t._v("Action")])])])}],!1,null,null,null).exports}}]);