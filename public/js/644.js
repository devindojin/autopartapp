"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[644],{8644:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var n=i(9669),a=i.n(n);const r={name:"ingredient_list",beforeMount:function(){this.getIngredientList()},data:function(){return{ingredients:[]}},methods:{getIngredientList:function(){var e=this;a().get(this.$popup_data.route("ingredient_get"),{}).then((function(t){e.ingredients=t.data.data}))},edit:function(e){this.$emit("edit",e)},remove:function(e){var t=this;a().delete(this.$popup_data.route("ingredient_delete")+"/"+e,{_method:"delete"}).then((function(e){t.$popup_data.message(e.data.message),t.$emit("refresh")}))}}};var s=i(1900);const o=(0,s.Z)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("table",{staticClass:"table table-bordered"},[e._m(0),e._v(" "),i("tbody",e._l(e.ingredients,(function(t,n){return i("tr",{key:n},[i("td",[e._v(e._s(n+1))]),e._v(" "),i("td",[e._v(e._s(t.name))]),e._v(" "),i("td",[e._v(e._s(t.category.name))]),e._v(" "),i("td",[e._v(e._s(e.$_.map(t.country,"name").join(" ,")))]),e._v(" "),i("td",[i("div",{staticStyle:{width:"200px"}},[i("img",{staticClass:"img-thumbnail img-fluid",attrs:{src:e.$popup_data.asset("storage/"+t.image),alt:t.name}})])]),e._v(" "),i("td",[i("button",{staticClass:"btn btn-sm btn-info",on:{click:function(i){return e.edit(t.id)}}},[i("i",{staticClass:"fa fa-edit"})]),e._v(" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(i){return e.remove(t.id)}}},[i("i",{staticClass:"fa fa-trash"})])])])})),0)])])}),[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",[e._v("#")]),e._v(" "),i("th",[e._v("Name")]),e._v(" "),i("th",[e._v("Category")]),e._v(" "),i("th",[e._v("Country")]),e._v(" "),i("th",[e._v("Image")]),e._v(" "),i("th",[e._v("Action")])])])}],!1,null,null,null).exports;function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}const c={name:"ingredient_add",props:{edit_ingredient:Object},beforeMount:function(){this.getCountry(),this.getCategory(),this.ingredient.country_id=[""],this.ingredient.category_id=[""],_.has(this.edit_ingredient,"name")&&(this.ingredient=this.edit_ingredient,this.ingredient.country_id=_.map(this.edit_ingredient.country,"id"),this.preview_image=this.$popup_data.asset("storage/"+this.ingredient.image))},data:function(){return{countries:[],categories:[],ingredient:{},submitted:!1,server_errors:{},preview_image:""}},methods:{getCountry:function(){var e=this;a().get(this.$popup_data.route("country_get"),{}).then((function(t){e.countries=t.data.data}))},getCategory:function(){var e=this;a().get(this.$popup_data.route("category_get"),{}).then((function(t){e.categories=t.data.data}))},onFileChange:function(e){this.ingredient.image=e.srcElement.files[0],this.preview_image=URL.createObjectURL(this.ingredient.image)},cancel:function(){this.$emit("load_list")},save:function(){var e=this;this.submitted=!0;var t=this;this.$validator.validate().then((function(i){if(i){var n=t.$popup_data.route("ingredient_add");_.has(e.edit_ingredient,"name")&&(n=t.$popup_data.route("ingredient_update")+"/"+e.edit_ingredient.id);var r=new FormData;r.append("category_id",t.ingredient.category_id),r.append("content",t.ingredient.content),r.append("country_id",t.ingredient.country_id),r.append("name",t.ingredient.name),"object"==d(t.ingredient.image)&&r.append("image",t.ingredient.image),a().post(n,r,{header:{"Content-Type":"multipart/form-data"}}).then((function(e){t.server_errors={},t.ingredient={},t.$popup_data.message(e.data.message),t.$emit("refresh")})).catch((function(e){t.server_errors=e.response.data.errors}))}}))}}};const l=(0,s.Z)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("form",{staticClass:"row mb-3",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label"},[e._v("Ingredient name:")]),e._v(" "),i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.ingredient.name,expression:"ingredient.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":e.submitted&&e.errors.has("name")},attrs:{name:"name",type:"text",placeholder:"Ingredient name"},domProps:{value:e.ingredient.name},on:{input:function(t){t.target.composing||e.$set(e.ingredient,"name",t.target.value)}}})])]),e._v(" "),e.$_.has(e.server_errors,"name")?i("div",{staticClass:"invalid-feedback d-block"},[e._v(e._s(e.server_errors.name.join(", ")))]):e._e(),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label"},[e._v("Ingredient content:")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ingredient.content,expression:"ingredient.content"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":e.submitted&&e.errors.has("content")},attrs:{name:"content",placeholder:"Ingredient content"},domProps:{value:e.ingredient.content},on:{input:function(t){t.target.composing||e.$set(e.ingredient,"content",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label"},[e._v("Ingredient image:")]),e._v(" "),i("div",{staticStyle:{width:"200px"}},[""!=e.preview_image?i("img",{staticClass:"img-thumbnail img-fluid",attrs:{src:e.preview_image}}):e._e()]),e._v(" "),i("div",{staticClass:"custom-file"},[e.$_.has(e.edit_ingredient,"image")?i("input",{class:{"custom-file-input":!0,"is-invalid":e.submitted&&e.errors.has("image")},attrs:{type:"file",id:"customFile",name:"image"},on:{change:e.onFileChange}}):i("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-file-input":!0,"is-invalid":e.submitted&&e.errors.has("image")},attrs:{type:"file",id:"customFile",name:"image"},on:{change:e.onFileChange}}),e._v(" "),i("label",{class:{"custom-file-label":!0,"is-invalid":e.submitted&&e.errors.has("image")},attrs:{for:"customFile"}},[e._v("Choose file")])]),e._v(" "),e.$_.has(e.server_errors,"image")?i("div",{staticClass:"invalid-feedback d-block"},[e._v(e._s(e.server_errors.image.join(", ")))]):e._e()]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"ingredient-country"}},[e._v("Select country")]),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.ingredient.country_id,expression:"ingredient.country_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":e.submitted&&e.errors.has("country_id")},attrs:{name:"country_id",multiple:"",id:"ingredient-country"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.ingredient,"country_id",t.target.multiple?i:i[0])}}},e._l(e.countries,(function(t,n){return i("option",{key:n,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"ingredient-category"}},[e._v("Select category")]),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.ingredient.category_id,expression:"ingredient.category_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":e.submitted&&e.errors.has("category_id")},attrs:{name:"category_id",id:"ingredient-category"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.ingredient,"category_id",t.target.multiple?i:i[0])}}},e._l(e.categories,(function(t,n){return i("option",{key:n,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)])]),e._v(" "),i("div",{staticClass:"col-md-12"},[e.$_.has(e.ingredient,"id")?i("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:e.save}},[e._v("Update")]):i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Add")])])])])}),[],!1,null,null,null).exports,u={name:"ingredient",beforeMount:function(){},mounted:function(){this.$emit("pagetitlechange",this.page_title)},data:function(){return{page_title:"Ingredient",componentLoaded:o,component_name:"list",edit_ingredient:{}}},methods:{addIngredient:function(){this.componentLoaded=l,this.component_name="add",this.edit_ingredient={}},cancel:function(){this.componentLoaded=o,this.component_name="list",this.edit_ingredient={}},refresh:function(){this.edit_ingredient={},"list"==this.component_name?this.$router.go(this.$router.currentRoute):(this.componentLoaded=o,this.component_name="list")},edit:function(e){var t=this;a().get(this.$popup_data.route("ingredient_detail")+"/"+e,{}).then((function(e){t.addIngredient(),t.edit_ingredient=e.data.data}))}}};const m=(0,s.Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-right"},["list"==e.component_name?i("button",{staticClass:"btn btn-success mb-3",on:{click:e.addIngredient}},[i("i",{staticClass:"fa fa-plus"}),e._v(" Add\n        ")]):i("button",{staticClass:"btn btn-success mb-3",on:{click:e.cancel}},[e._v("\n            Cancel\n        ")])]),e._v(" "),i(e.componentLoaded,{tag:"component",attrs:{edit_ingredient:e.edit_ingredient},on:{refresh:e.refresh,edit:e.edit}})],1)}),[],!1,null,null,null).exports}}]);